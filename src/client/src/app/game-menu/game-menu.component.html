<div class="top">
    <mat-tab-group mat-align-tabs="center" [selectedIndex]="currentTab" (selectedIndexChange)="currentTab = $event">
        <mat-tab label="Overview" style="display: flex; flex-direction: column; overflow: hidden;">
            <div style="height: 5%;">
                <div style="font-size: large;">
                    Comparisons Made:
                </div>
            </div>
            <div style="height: 50%;">
                <div class="history-menu">
                    <div class="history-list" role="list">
                        <div class="history-item" *ngFor="let item of history; index as i" style="display: flex; flex-direction: row;">
                            <div class="history-undo">
                                <button disabled mat-raised-button color="primary" (click)="undoPick(item)" [matTooltip]="'Undo this history item.'">
                                    <mat-icon fontIcon="undo"></mat-icon>
                                </button>
                            </div>
                            <img class="history-image" [src]="item.itemA.imageUrl" [matTooltip]="item.itemA.getDisplayName(language)">
                            <div class="history-vs">
                                VS
                            </div>
                            <img class="history-image" [src]="item.itemB.imageUrl" [matTooltip]="item.itemB.getDisplayName(language)">
                            <div class="history-choice">
                                Choice:
                            </div>
                            <img class="history-image" [src]="item.choice.imageUrl" [matTooltip]="item.choice.getDisplayName(language)">
                        </div>
                    </div>
                </div>
            </div>
            <div style="height: 5%;">
                <div style="font-size: large;">
                    Deleted Items:
                </div>
            </div>
            <div class="deleted-menu" style="height: 35%;">
                <div class="deleted-list" role="list">
                    <div class="deleted-item" *ngFor="let item of deletedItems">
                        <div class="deleted-undo">
                            <button mat-raised-button color="primary" (click)="undoDelete(item)" [matTooltip]="'Undo Delete of ' + getItemDisplayName(item)">
                                <mat-icon fontIcon="undo"></mat-icon>
                            </button>
                        </div>
                        <img class="deleted-image" [src]="item.imageUrl">
                        <div class="deleted-name">
                            {{getItemDisplayName(item)}}
                        </div>
                    </div>
                </div>
            </div>
        </mat-tab>
        <mat-tab label="Matchup" [disabled]="gameDone">
            <div class="matchup-menu" *ngIf="!gameDone">
                <div class="matchup" style="display: flex; flex-wrap: nowrap; justify-content: space-evenly">
                    <app-sortable-item-tile [item]="leftItem" (selected)="pickLeft()" (deleted)="deleteLeft()" style="min-width: 100px; max-width: 50%;"></app-sortable-item-tile>
                    <app-sortable-item-tile [item]="rightItem" (selected)="pickRight()" (deleted)="deleteRight()" style="min-width: 100px; max-width: 50%;"></app-sortable-item-tile>
                </div>
            </div>
        </mat-tab>
        <mat-tab label="Results" [disabled]="!gameDone">
            <div class="result-menu" *ngIf="gameDone">
                <div class="result-list" role="list">
                    <div class="result-item" *ngFor="let item of results; index as i">
                        <div class="result-rank">
                            <b>
                                {{i + 1}}
                            </b>
                        </div>
                        <img class="result-image" [src]="item.imageUrl">
                        <div class="result-name">
                            {{getItemDisplayName(item)}}
                        </div>
                    </div>
                </div>
            </div>
        </mat-tab>
    </mat-tab-group>
    <div clas="bottom-pannel">
        <div style="display: flex; flex-wrap: nowrap; justify-content: space-around; margin-top: 3%;">
            <button mat-raised-button color="primary" (click)="undoPick()" *ngIf="(currentTab == 1 || currentTab == 2)">
                <mat-icon fontIcon="undo"></mat-icon>
                Undo Selection
            </button>
            <div *ngIf="currentTab == 2">
                <button mat-raised-button color="primary" [matMenuTriggerFor]="exportMenu">
                    <mat-icon fontIcon="download"></mat-icon>
                    Export Results
                </button>
                <mat-menu #exportMenu="matMenu" yPosition="above">
                <button mat-menu-item (click)="export('txt')">TXT</button>
                <button mat-menu-item (click)="export('csv')">CSV</button>
                </mat-menu>
            </div>
            <button mat-raised-button color="warn" (click)="restartSession()">
                <mat-icon fontIcon="restart_alt"></mat-icon>
                Restart Session
            </button>
            <div style="font-size: large;" *ngIf="!gameDone">
                <b>Remaining Comparisons: ~{{estimateRemaining()}}</b>
            </div>
        </div>
    </div>
</div>